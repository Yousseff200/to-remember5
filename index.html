
  <!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2252963141038095"
     crossorigin="anonymous"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ“¸ Ø³Ø¬Ù„ Ø°ÙƒØ±ÙŠØ§ØªÙƒ</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Cairo', sans-serif;
      background: linear-gradient(to right, #e3f2fd, #ffffff);
      margin: 0;
      padding: 0;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #0077ff;
      font-weight: 700;
      font-size: 2.8rem;
      margin-top: 30px;
      margin-bottom: 20px;
    }
    .container {
      width: 95%;
      max-width: 900px;
      margin: auto;
      padding: 30px;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 30px rgba(0,0,0,0.1);
    }
    .form-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .input-group {
      position: relative;
    }
    .input-group input,
    .input-group textarea {
      width: 100%;
      padding: 15px 50px 15px 15px;
      border: 1px solid #ddd;
      border-radius: 12px;
      font-size: 1rem;
      transition: 0.3s;
      background: #f9f9f9;
    }
    .input-group input:focus,
    .input-group textarea:focus {
      border-color: #0077ff;
      background: #fff;
      outline: none;
      box-shadow: 0 0 10px rgba(0, 119, 255, 0.2);
    }
    .input-group i {
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #0077ff;
      font-size: 1.2rem;
    }
    textarea {
      resize: vertical;
      min-height: 100px;
    }
    button {
      background-color: #0077ff;
      color: white;
      padding: 14px;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background-color: #005dc1;
    }
    #preview {
      margin: 10px auto;
      display: none;
      max-width: 300px;
      border-radius: 10px;
    }
    .search-area {
      margin-top: 40px;
      background-color: #f0f4fa;
      padding: 20px;
      border-radius: 15px;
    }
    .search-area input,
    .search-area select {
      width: 100%;
      padding: 12px 15px;
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    .date-filters,
    .date-range-filters {
      display: none;
      margin-top: 10px;
    }
    .voice-search-btn {
      background-color: #ff9800;
      color: white;
      margin-top: 10px;
    }
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 20px;
      margin-top: 40px;
    }
    .memory-card {
      background: #ffffff;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      text-align: right;
    }
    .memory-card img,
    .memory-card video {
      width: 100%;
      border-radius: 10px;
    }
    .memory-card audio {
      width: 100%;
    }
    .memory-card a {
      color: #0077ff;
      font-weight: bold;
      text-decoration: none;
    }
    .memory-card button {
      background-color: #e53935;
      font-size: 0.9rem;
    }
    .memory-card button:hover {
      background-color: #b71c1c;
    }
    @media (max-width: 600px) {
      h1 { font-size: 2rem; }
    }
  </style>
</head>
<body>

<h1>ğŸ“¸ Ø³Ø¬Ù„ Ø°ÙƒØ±ÙŠØ§ØªÙƒ</h1>
<div class="container">
  <div class="form-container">
    <div class="input-group">
      <i class="fas fa-image"></i>
      <input type="file" id="imageInput" accept="image/*" />
    </div>
    <div class="input-group">
      <i class="fas fa-video"></i>
      <input type="file" id="videoInput" accept="video/*" />
    </div>
    <div class="input-group">
      <i class="fas fa-headphones"></i>
      <input type="file" id="audioInput" accept="audio/*" />
    </div>
    <div class="input-group">
      <i class="fas fa-file-pdf"></i>
      <input type="file" id="pdfInput" accept=".pdf" />
    </div>
    <div class="input-group">
      <textarea id="memoryInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø°ÙƒØ±Ù‰ Ù‡Ù†Ø§..."></textarea>
    </div>
    <button onclick="saveMemory()">Ø§Ø­ÙØ¸ Ø§Ù„Ø°ÙƒØ±Ù‰</button>
    <button onclick="clearAll()">ğŸ—‘ï¸ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª</button>
    <img id="preview" />
  </div>

  <div class="search-area">
    <h3>ğŸ” Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª</h3>
    <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©..." onkeyup="searchMemories()" />
    <select id="searchOption" onchange="toggleDateFilters()">
      <option value="single">Ø¨Ø­Ø« Ø¨ØªØ§Ø±ÙŠØ® Ù…Ø¹ÙŠÙ†</option>
      <option value="range">Ø¨Ø­Ø« Ø¨ØªØ§Ø±ÙŠØ® Ù…Ù† - Ø¥Ù„Ù‰</option>
    </select>
    <div class="date-filters">
      <input type="date" id="dateInput" onchange="searchMemories()" />
    </div>
    <div class="date-range-filters">
      <input type="date" id="startDate" onchange="searchMemories()" />
      <input type="date" id="endDate" onchange="searchMemories()" />
    </div>
    <button class="voice-search-btn" onclick="startVoiceSearch()">ğŸ¤ Ø¨Ø­Ø« ØµÙˆØªÙŠ</button>
  </div>

  <div class="gallery" id="gallery"></div>
</div>

<script>
const imageInput = document.getElementById("imageInput");
const videoInput = document.getElementById("videoInput");
const audioInput = document.getElementById("audioInput");
const pdfInput = document.getElementById("pdfInput");
const memoryInput = document.getElementById("memoryInput");
const gallery = document.getElementById("gallery");
const preview = document.getElementById("preview");
const searchInput = document.getElementById("searchInput");
const searchOption = document.getElementById("searchOption");
const dateInput = document.getElementById("dateInput");
const startDate = document.getElementById("startDate");
const endDate = document.getElementById("endDate");
const dateFilters = document.querySelector(".date-filters");
const dateRangeFilters = document.querySelector(".date-range-filters");

let tempImageData = null, tempVideoData = null, tempAudioData = null, tempPdfData = null;

imageInput.addEventListener("change", function () {
  const file = this.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function (e) {
      tempImageData = e.target.result;
      preview.src = tempImageData;
      preview.style.display = "block";
    };
    reader.readAsDataURL(file);
  } else {
    preview.style.display = "none";
    tempImageData = null;
  }
});

videoInput.onchange = e => tempVideoData = e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null;
audioInput.onchange = e => tempAudioData = e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null;
pdfInput.onchange = e => tempPdfData = e.target.files[0] ? URL.createObjectURL(e.target.files[0]) : null;

function saveMemory() {
  const text = memoryInput.value.trim();
  if (!text && !tempImageData && !tempVideoData && !tempAudioData && !tempPdfData) {
    alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø°ÙƒØ±Ù‰");
    return;
  }
  const memories = JSON.parse(localStorage.getItem("memories") || "[]");
  memories.push({
    id: Date.now(),
    image: tempImageData,
    video: tempVideoData,
    audio: tempAudioData,
    pdf: tempPdfData,
    text,
    time: new Date().toISOString()
  });
  localStorage.setItem("memories", JSON.stringify(memories));
  clearInputs();
  renderGallery();
}

function clearInputs() {
  memoryInput.value = "";
  imageInput.value = "";
  videoInput.value = "";
  audioInput.value = "";
  pdfInput.value = "";
  tempImageData = tempVideoData = tempAudioData = tempPdfData = null;
  preview.style.display = "none";
}

function renderGallery(memoriesList = null) {
  gallery.innerHTML = "";
  const memories = (memoriesList || JSON.parse(localStorage.getItem("memories") || "[]")).reverse();
  memories.forEach(mem => {
    const card = document.createElement("div");
    card.className = "memory-card";
    card.innerHTML = `
      ${mem.image ? `<img src="${mem.image}" alt="ØµÙˆØ±Ø©">` : ""}
      ${mem.video ? `<video src="${mem.video}" controls></video>` : ""}
      ${mem.audio ? `<audio src="${mem.audio}" controls></audio>` : ""}
      ${mem.pdf ? `<a href="${mem.pdf}" target="_blank">ğŸ“„ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù PDF</a>` : ""}
      <p>${mem.text}</p>
      <small>${new Date(mem.time).toLocaleString()}</small>
      <button onclick="deleteMemory(${mem.id})">ğŸ—‘ï¸ Ø­Ø°Ù</button>
    `;
    gallery.appendChild(card);
  });
}

function deleteMemory(id) {
  let memories = JSON.parse(localStorage.getItem("memories") || "[]");
  memories = memories.filter(m => m.id !== id);
  localStorage.setItem("memories", JSON.stringify(memories));
  renderGallery();
}

function clearAll() {
  if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø°ÙƒØ±ÙŠØ§ØªØŸ")) {
    localStorage.removeItem("memories");
    renderGallery();
  }
}

function toggleDateFilters() {
  dateFilters.style.display = searchOption.value === "single" ? "block" : "none";
  dateRangeFilters.style.display = searchOption.value === "range" ? "block" : "none";
}

function searchMemories() {
  const query = searchInput.value.toLowerCase();
  let memories = JSON.parse(localStorage.getItem("memories") || "[]");
  let filtered = memories.filter(m => m.text.toLowerCase().includes(query));

  if (searchOption.value === "single" && dateInput.value) {
    const selectedDate = new Date(dateInput.value);
    filtered = filtered.filter(m => {
      const memoryDate = new Date(m.time);
      return memoryDate.getFullYear() === selectedDate.getFullYear() &&
             memoryDate.getMonth() === selectedDate.getMonth() &&
             memoryDate.getDate() === selectedDate.getDate();
    });
  }

  if (searchOption.value === "range" && startDate.value && endDate.value) {
    const start = new Date(startDate.value);
    const end = new Date(endDate.value);
    end.setHours(23, 59, 59, 999);
    filtered = filtered.filter(m => {
      const d = new Date(m.time);
      return d >= start && d <= end;
    });
  }

  renderGallery(filtered);
}

function startVoiceSearch() {
  if (!('webkitSpeechRecognition' in window)) {
    alert("Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­. Ø§Ø³ØªØ®Ø¯Ù… Google Chrome.");
    return;
  }
  const recognition = new webkitSpeechRecognition();
  recognition.lang = "ar-EG";
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;
  recognition.start();
  recognition.onresult = function(event) {
    const transcript = event.results[0][0].transcript;
    searchInput.value = transcript;
    searchMemories();
  };
  recognition.onerror = function(event) {
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ØµÙˆØªÙŠ: " + event.error);
  };
}

renderGallery();
</script>
</body>
</html>
